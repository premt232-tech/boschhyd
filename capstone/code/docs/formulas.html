<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Turbine Health Analytics API Documentation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.6;
            margin: 0 auto;
            max-width: 900px;
            padding: 20px;
            background-color: #f4f7f9;
            color: #333;
        }
        h1, h2, h3 {
            color: #004d66;
        }
        h1 {
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        .section-separator {
            border: 0;
            height: 1px;
            background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));
            margin: 40px 0;
        }
        .formula-box {
            background-color: #e9ecef;
            border-left: 5px solid #007bff;
            padding: 15px;
            margin: 20px 0;
            font-size: 1.1em;
            overflow-x: auto;
        }
        strong {
            color: #007bff;
        }
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

    <h1>Smart Turbine Health Analytics API Documentation</h1>

    <h2>1. Introduction & Core Concepts</h2>
    
    <h3>1.1 Purpose of this Document</h3>
    <p>This document provides a comprehensive explanation of every analytical metric and output generated by the Smart Turbine Health Analytics API. Its goal is to clarify the <strong>Why</strong>, <strong>How</strong>, and <strong>When</strong> of using this API for advanced operational monitoring.</p>
    <p>By processing raw sensor telemetry, this API transforms low-level data points into high-level, actionable insights regarding the gas turbine's operational performance, thermodynamic efficiency, and overall component health. A clear understanding of these metrics is the first step toward implementing a successful predictive maintenance and performance optimization strategy.</p>

    <h3>1.2 The Gas Turbine Thermodynamic Cycle (Brayton Cycle)</h3>
    <p>At its core, the gas turbine operates on a thermodynamic principle known as the Brayton Cycle. Visualizing this cycle is key to understanding what the API metrics represent.</p>
    <ol>
        <li><strong>Intake (Point 1):</strong> Ambient air is drawn into the engine's compressor. The state of this air is defined by the <strong>Compressor Inlet Temperature ($T_1$)</strong> and <strong>Inlet Pressure ($P_1$)</strong>.</li>
        <li><strong>Compression (Point 2):</strong> The compressor, driven by the turbine shaft, rapidly squeezes this air. This work increases the air's energy, resulting in a much higher <strong>Compressor Outlet Temperature ($T_2$)</strong> and <strong>Outlet Pressure ($P_2$)</strong>.</li>
        <li><strong>Combustion:</strong> In the combustor, fuel is continuously injected into the compressed air and ignited, creating a high-temperature, high-pressure gas.</li>
        <li><strong>Expansion (Point 4.8):</strong> This high-energy gas expands through the turbine section, forcing the turbine blades to spin at high speed. This rotation drives both the compressor at the front and the main output shaft (for propulsion or power generation). The temperature of the gas after it has done its work in the High-Pressure turbine is the <strong>HP Turbine Exit Temperature ($T_{48}$)</strong>.</li>
    </ol>
    <p>The API's primary function is to calculate metrics that precisely measure the performance and health of the "Compression" and "Expansion" stages of this critical cycle.</p>

    <hr class="section-separator">

    <h2>2. In-Depth Explanation of Derived Features</h2>
    <p>Derived features are the most powerful aspect of this API. They are complex metrics that are not measured by a single sensor but are calculated by combining multiple sensor inputs. They provide a far deeper insight into the engine's thermodynamic condition than any single raw value.</p>

    <h3>2.1 Pressure Ratio ($$\pi_p$$)</h3>
    <p><strong>What It Is:</strong> The fundamental measure of the compressor's work. It quantifies how much the air pressure is increased from the inlet to the outlet of the compressor.</p>
    <p><strong>How It's Calculated:</strong></p>
    <div class="formula-box">
        $$
        \text{Pressure Ratio} = \frac{\text{Compressor Outlet Pressure}}{\text{Compressor Inlet Pressure}} = \frac{P_2}{P_1}
        $$
    </div>
    <p><strong>What It Signifies:</strong></p>
    <ul>
        <li><strong>Core Performance Metric:</strong> The pressure ratio is the most significant factor influencing a gas turbine's potential power output and efficiency. Engines with higher pressure ratios are typically more powerful and efficient.</li>
        <li><strong>Compressor Health:</strong> For a given turbine speed (GTn), the compressor should achieve a predictable pressure ratio. If the engine must spin faster to achieve the same pressure ratio as when it was new, or if the ratio is lower at the same speed, it can indicate a health problem. Common causes include <strong>compressor fouling</strong> (buildup of dirt, salt, or industrial contaminants on the blades) or, more seriously, internal erosion or damage.</li>
    </ul>
    <p><strong>Real-World Application:</strong></p>
    <ul>
        <li><strong>Scenario:</strong> A power plant operator notices their gas turbine's fuel consumption has crept up by 3% over the last two months, while the average power output has remained constant.</li>
        <li><strong>Action:</strong> They query the <code>analytics-report</code> endpoint, comparing the last two months of data. They observe that the <code>avg_pressure_ratio</code> has fallen from <strong>16.1</strong> to <strong>15.4</strong>.</li>
        <li><strong>Decision:</strong> The drop in pressure ratio directly explains the loss of efficiency. This is a classic symptom of compressor fouling. They schedule a routine offline compressor wash during the next low-demand weekend. After the wash, the pressure ratio returns to <strong>16.0</strong>, and fuel efficiency is restored, saving thousands of dollars per day.</li>
    </ul>

    <h3>2.2 Thermal Efficiency ($$\eta_{th}$$)</h3>
    <p><strong>What It Is:</strong> A theoretical measure of how efficiently the gas turbine converts the heat energy from its fuel into useful mechanical work. It represents the ideal efficiency of the Brayton cycle given the engine's pressure ratio.</p>
    <p><strong>How It's Calculated:</strong></p>
    <div class="formula-box">
        $$
        \eta_{th} (\%) = \left( 1 - \frac{1}{\pi_p^{(\gamma-1)/\gamma}} \right) \times 100
        $$
    </div>
    <p><strong>Explanation of Terms:</strong></p>
    <ul>
        <li><strong>$$\pi_p$$:</strong> This is the <strong>Pressure Ratio</strong> calculated in the previous step.</li>
        <li><strong>$$\gamma$$ (Gamma):</strong> Known as the heat capacity ratio (or adiabatic index) for air. It's a thermodynamic constant, and for this API, a standard value of <strong>1.4</strong> is used.</li>
    </ul>
    <p><strong>What It Signifies:</strong></p>
    <ul>
        <li><strong>Performance Benchmark:</strong> This value tells you the <em>maximum possible</em> efficiency your turbine could achieve for its design (as defined by its pressure ratio). The actual, real-world efficiency will always be lower due to friction, heat loss, and other factors.</li>
        <li><strong>Health Trending:</strong> While the absolute number is a theoretical benchmark, <strong>trending this value over time is extremely valuable.</strong> If the pressure ratio degrades due to fouling (as in the example above), the thermal efficiency will also decrease, providing a clear, quantifiable measure of the performance loss.</li>
    </ul>
    <p><strong>Real-World Application:</strong></p>
    <ul>
        <li><strong>Scenario:</strong> An aerospace company is testing a new engine design.</li>
        <li><strong>Action:</strong> During performance trials, they use this API to monitor the <code>thermal_efficiency</code> in real-time. They find that the efficiency peaks at 95% of the turbine's max RPM, but drops off slightly at 100% RPM.</li>
        <li><strong>Decision:</strong> This data allows them to define the engine's <strong>Most Economical Cruise (MEC)</strong> setting. They can then program the engine control software to favor this RPM range during long-haul flights, maximizing fuel efficiency and extending the aircraft's range.</li>
    </ul>

    <h3>2.3 Compressor Isentropic Efficiency ($$\eta_c$$)</h3>
    <p><strong>What It Is:</strong> The most direct indicator of the compressor's mechanical and aerodynamic health. It compares the actual energy required to compress the air with the energy that would be required in a perfect, frictionless, and heat-loss-free (isentropic) world.</p>
    <p><strong>How It's Calculated:</strong> This is a two-step calculation.</p>
    <ol>
        <li><strong>First, calculate the Ideal Outlet Temperature ($$T_{2s}$$):</strong> This is the temperature the air <em>would</em> be if the compression were 100% perfect.
            <div class="formula-box">
                $$
                T_{2s} = T_1 \times (\pi_p)^{(\gamma-1)/\gamma}
                $$
            </div>
        </li>
        <li><strong>Then, calculate the efficiency:</strong> This ratio compares the ideal temperature rise to the actual temperature rise measured by the sensors.
            <div class="formula-box">
                $$
                \eta_c (\%) = \left( \frac{\text{Ideal Temperature Rise}}{\text{Actual Temperature Rise}} \right) \times 100 = \left( \frac{T_{2s} - T_1}{T_2 - T_1} \right) \times 100
                $$
            </div>
        </li>
    </ol>
    <p><strong>Important Note on Temperatures:</strong> Thermodynamic formulas involving ratios require absolute temperature scales. The API code automatically converts all Celsius sensor readings (<code>t1</code>, <code>t2</code>) to Kelvin by adding <strong>273.15</strong> before performing these calculations.</p>
    <p><strong>What It Signifies & The ">100% Anomaly":</strong></p>
    <ul>
        <li>For any simple, real-world compressor, this value <strong>must be less than 100%</strong>. This is because real-world friction and turbulence (inefficiencies) always add extra heat, making the actual outlet temperature ($$T_2$$) higher than the ideal temperature ($$T_{2s}$$).</li>
        <li>Your dataset, however, produces results like <strong>160%</strong>. This is not a calculation error. It signifies that your simulator is modeling a highly advanced compression cycle, likely involving <strong>intercooling</strong>. Intercooling is a process where the air is deliberately cooled between stages of compression. This drastically lowers the final outlet temperature ($$T_2$$), making it appear <em>even cooler</em> than the ideal temperature from the simple formula.</li>
        <li><strong>How to Interpret:</strong> For your specific dataset, you should not treat this as an absolute efficiency value. Instead, treat it as a <strong>highly sensitive health index</strong>. A drop from a baseline of <strong>165%</strong> to <strong>155%</strong> is a very strong indicator of component degradation, even if the absolute numbers are physically unusual for a simple cycle.</li>
    </ul>

    <hr class="section-separator">

    <h2>4. API Endpoint Output Guide</h2>
    
    <h3><code>GET /data/health-summary</code></h3>
    <p><strong>When to Use:</strong> For daily, weekly, or monthly high-level "scorecard" monitoring of the entire turbine fleet. It provides a quick, aggregated view of each turbine's lifetime performance.</p>
    <ul>
        <li><strong><code>turbine_id</code>:</strong> The unique identifier for the turbine.</li>
        <li><strong><code>record_count</code>:</strong> Total number of sensor readings logged. Useful for verifying data pipeline integrity.</li>
        <li><strong><code>total_fuel_usage</code>:</strong> Cumulative fuel consumed by the turbine. Essential for long-term operational cost analysis.</li>
        <li><strong><code>avg_shaft_torque_gtt</code>:</strong> The average power output delivered by the turbine shaft. Ideal for comparing the average workload between different turbines.</li>
        <li><strong><code>avg_exit_temp_t48</code>:</strong> The average temperature of the hot gas after it has passed through the turbine. A critical parameter for monitoring the thermal stress and health of the turbine's "hot section". A consistently rising trend can predict the need for future maintenance.</li>
        <li><strong><code>avg_pressure_ratio</code>:</strong> The average compression performance, a primary indicator of overall engine health.</li>
        <li><strong><code>avg_thermal_efficiency_percent</code>:</strong> The turbine's average theoretical performance benchmark.</li>
        <li><strong><code>avg_compressor_efficiency_percent</code>:</strong> The average health index for the compressor section.</li>
        <li><strong><code>avg_compressor_decay</code> / <code>avg_turbine_decay</code>:</strong> The average health coefficients provided by the simulator. Values closer to 1.0 indicate better health and less degradation.</li>
    </ul>

    <h3><code>POST /data/analytics-report</code></h3>
    <p><strong>When to Use:</strong> For detailed root cause analysis, troubleshooting, and performance analysis over a specific time window (e.g., "analyze performance during last week's heatwave" or "investigate the 3-hour period before the unplanned shutdown").</p>
    <ul>
        <li><strong><code>record_count</code>, <code>period_start</code>, <code>period_end</code>:</strong> Defines the precise scope of the data included in the report.</li>
        <li><strong><code>compressor_stats</code>:</strong> Provides Min/Avg/Max statistics for all key compressor parameters (<code>t1</code>, <code>t2</code>, <code>p1</code>, <code>p2</code>, <code>pressure_ratio</code>).
            <ul>
                <li><strong>Significance:</strong> A large delta between <code>min</code> and <code>max</code> values indicates a wide operational range or significant transient events. A sudden spike in the <code>max</code> outlet temperature (<code>t2</code>) that doesn't correspond to a similar rise in pressure ratio could signify a compressor stall or surge event.</li>
            </ul>
        </li>
        <li><strong><code>turbine_stats</code>:</strong> Provides Min/Avg/Max for key turbine and power output parameters (<code>t48</code>, <code>p48</code>, <code>gtt</code>, <code>gtn</code>, <code>ggn</code>).
            <ul>
                <li><strong>Significance:</strong> Monitoring the <code>max</code> exit temperature (<code>t48</code>) is vital to ensure the engine does not exceed its design limits, which could cause severe damage. Correlating the <code>avg</code> shaft torque (<code>gtt</code>) with the <code>avg</code> fuel flow rate (<code>mf</code> from the <code>health_summary</code>) over the same period gives a direct measure of fuel-specific power output.</li>
            </ul>
        </li>
        <li><strong><code>efficiency_metrics</code>:</strong> Provides Min/Avg/Max for the calculated efficiencies.
            <ul>
                <li><strong>Significance:</strong> This reveals the best and worst performance points within the period. If the <code>min</code> efficiency is extremely low, it could point to specific operational phases (like startup, shutdown, or low-load conditions) that are highly inefficient and could be optimized.</li>
            </ul>
        </li>
    </ul>

</body>
</html>